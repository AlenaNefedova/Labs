:imagesdir: Images
:figure-caption: Рисунок
:table-caption: Таблица
== Лабораторная работа 5

=== Задание:
* Написать программу, которая моргает *всеми 4 светодиодами* через прямой доступ к памяти по адресам. Тактирование системной частоты произвести с модуля PLL, так, чтобы системная частота была 30 МГц.


=== 1. Работа с платой

Необходимо, чтобы *4* светодиода, подключенных к портам *C.5, C.8, C.9, A.5*, одновременно загорались и гасли.

* Запустим проект из прошлой лабораторной работы.

image::1.png[]



Код программы:

[source, c]
----
#include <iostream>
#include "rccregisters.hpp" // for RCC
#include "gpioaregisters.hpp" //for Gpioa
#include "gpiocregisters.hpp" //for Gpioc

std::uint32_t SystemCoreClock = 16'000'000U;

extern "C"
 {
   int __low_level_init(void)
   {
     RCC::CR::HSION::On::Set();
     while (RCC::CR::HSIRDY::NotReady::IsSet())
     {
     }
     // Установка коэффициентов пересчета частоты
     RCC::PLLCFGR::PLLN0::Set(120);
     RCC::PLLCFGR::PLLM0::Set(32);

     RCC::CR::PLLON::On::Set();
     while (RCC::CR::PLLRDY::Unclocked::IsSet())
     {
     }

     RCC::CFGR::SW::Pll::Set();

     while (!RCC::CFGR::SWS::Pll::IsSet())
     {
     }
     return 1;
   }
 }